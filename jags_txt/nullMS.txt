
model {
  ### (1) Priors for parameters
  
  psi ~ dunif(0, 1)
  theta ~ dunif(0,1)
  detP ~ dunif(0,1)
  
  # likelihood
  
  for(i in 1:ncells){
    z[i] ~ dbern(psi)
    for(j in 1:nsites){
      u[i,j] ~ dbern(z[i] * theta)
        for(k in 1:nsurveys){
          y[i,j,k] ~ dbern(u[i,j] * detP)
        }
    }
  }

  
  ### (4) Derived quantities
  sum.z <- sum(z[])
}
